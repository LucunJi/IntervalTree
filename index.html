<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Interval Tree</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">

    <!--  Include JSXGraph  -->
    <link href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js" charset="UTF-8"></script>

    <!-- The next line is optional: MathJax -->
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" id="MathJax-script" async></script>
</head>
<body>

<div id="plotboard" class="jxgbox" style="max-width:50%; aspect-ratio: 1/1;"></div>

<script>
    var plotboard = JXG.JSXGraph.initBoard('plotboard',
        {
            boundingbox: [-8, 8, 8, -8], showCopyright: false, showNavigation: false
        });
    var creatingLine = undefined;
    plotboard.on('down', event => {
        if (event.shiftKey) return;
        if (plotboard.getAllObjectsUnderMouse(event).length > 0) return;
        const coords = plotboard.getUsrCoordsOfMouse(event);
        var p1 = plotboard.create('point', coords), p2 = plotboard.create('point', coords),
            l = plotboard.create('line', [p1, p2], {straightFirst: false, straightLast: false});
        p1.on('drag', event => {
            p2.setPosition(JXG.COORDS_BY_USER,
                [p2.coords.usrCoords[1], p1.coords.usrCoords[2]])
        });
        p2.on('drag', event => {
            p1.setPosition(JXG.COORDS_BY_USER,
                [p1.coords.usrCoords[1], p2.coords.usrCoords[2]])
        });
        creatingLine = {p1: p1, p2: p2};
    });
    plotboard.on('move', event => {
        if (creatingLine !== undefined) {
            const coords = plotboard.getUsrCoordsOfMouse(event);
            creatingLine.p1.setPosition(JXG.COORDS_BY_USER,
                [creatingLine.p1.coords.usrCoords[1], coords[1]]);
            creatingLine.p2.setPosition(JXG.COORDS_BY_USER, coords);
            plotboard.update();
        }
    });
    plotboard.on('up', event => {
        creatingLine = undefined;
    });
</script>